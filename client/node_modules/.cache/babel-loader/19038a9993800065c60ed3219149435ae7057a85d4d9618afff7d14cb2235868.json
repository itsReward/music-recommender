{"ast":null,"code":"var _jsxFileName = \"/home/zeus/Development/music-recommender/client/src/pages/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport SongCard from '../components/SongCard';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const {\n    user,\n    token\n  } = useContext(AuthContext);\n  const [favorites, setFavorites] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get('/api/users/profile');\n        setFavorites(response.data.favorites || []);\n        setError(null);\n      } catch (err) {\n        console.error('Error fetching profile:', err);\n        setError('Failed to load your profile. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (token) {\n      fetchUserProfile();\n    }\n  }, [token]);\n  const handleRating = (songId, rating) => {\n    // Update local state after rating\n    setFavorites(prevSongs => prevSongs.map(song => song._id === songId ? {\n      ...song,\n      userRating: rating\n    } : song));\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading profile...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 16\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Hi, \", user === null || user === void 0 ? void 0 : user.username, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Here's your music profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"favorites-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Favorite Songs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-favorites\",\n        children: \"You haven't added any favorites yet. Start exploring and add some songs!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"song-grid\",\n        children: favorites.map(song => /*#__PURE__*/_jsxDEV(SongCard, {\n          song: song,\n          onRate: handleRating\n        }, song._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"bVDbxzQ26KmZD39pEKYnklI4Lds=\");\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","SongCard","axios","jsxDEV","_jsxDEV","Profile","_s","user","token","favorites","setFavorites","loading","setLoading","error","setError","fetchUserProfile","response","get","data","err","console","handleRating","songId","rating","prevSongs","map","song","_id","userRating","className","children","fileName","_jsxFileName","lineNumber","columnNumber","username","length","onRate","_c","$RefreshReg$"],"sources":["/home/zeus/Development/music-recommender/client/src/pages/Profile.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport SongCard from '../components/SongCard';\nimport axios from 'axios';\n\nconst Profile = () => {\n    const { user, token } = useContext(AuthContext);\n    const [favorites, setFavorites] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        const fetchUserProfile = async () => {\n            try {\n                setLoading(true);\n                const response = await axios.get('/api/users/profile');\n                setFavorites(response.data.favorites || []);\n                setError(null);\n            } catch (err) {\n                console.error('Error fetching profile:', err);\n                setError('Failed to load your profile. Please try again later.');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        if (token) {\n            fetchUserProfile();\n        }\n    }, [token]);\n\n    const handleRating = (songId, rating) => {\n        // Update local state after rating\n        setFavorites(prevSongs =>\n            prevSongs.map(song =>\n                song._id === songId\n                    ? { ...song, userRating: rating }\n                    : song\n            )\n        );\n    };\n\n    if (loading) {\n        return <div className=\"loading\">Loading profile...</div>;\n    }\n\n    if (error) {\n        return <div className=\"error-message\">{error}</div>;\n    }\n\n    return (\n        <div className=\"profile-page\">\n            <div className=\"profile-header\">\n                <h2>Hi, {user?.username}!</h2>\n                <p>Here's your music profile</p>\n            </div>\n\n            <section className=\"favorites-section\">\n                <h3>Your Favorite Songs</h3>\n\n                {favorites.length === 0 ? (\n                    <p className=\"no-favorites\">\n                        You haven't added any favorites yet. Start exploring and add some songs!\n                    </p>\n                ) : (\n                    <div className=\"song-grid\">\n                        {favorites.map(song => (\n                            <SongCard\n                                key={song._id}\n                                song={song}\n                                onRate={handleRating}\n                            />\n                        ))}\n                    </div>\n                )}\n            </section>\n        </div>\n    );\n};\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}